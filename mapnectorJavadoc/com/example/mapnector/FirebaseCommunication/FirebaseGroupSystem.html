<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_242-release) on Mon Jun 21 13:45:18 IDT 2021 -->
<title>FirebaseGroupSystem</title>
<meta name="date" content="2021-06-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FirebaseGroupSystem";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseHelper.html" title="class in com.example.mapnector.FirebaseCommunication"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html" target="_top">Frames</a></li>
<li><a href="FirebaseGroupSystem.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.example.mapnector.FirebaseCommunication</div>
<h2 title="Class FirebaseGroupSystem" class="title">Class FirebaseGroupSystem</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li>java.lang.Object</li>
<li>
<ul class="inheritance">
<li>com.example.mapnector.FirebaseCommunication.FirebaseGroupSystem</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="typeNameLabel">FirebaseGroupSystem</span>
extends java.lang.Object</pre>
<div class="block">in my opinion the most important class in the application. Contains logic of doing many actions on groups, users, initializes FirebaseHelper.current;
 One of the 3 FirebaseCommunication classes - manages work that has to do with groups management and users. Stuff that has to do with mails goes to be processed in
 the son, fms</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private android.app.Activity</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#activity">activity</a></span></code>
<div class="block">MapsActivtiy</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../com/example/mapnector/LVAdapters/AdapterManager.html" title="class in com.example.mapnector.LVAdapters">AdapterManager</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#ADmanager">ADmanager</a></span></code>
<div class="block">reference to the ADmanager created in LVHelper</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#canJoinLeaveGroup">canJoinLeaveGroup</a></span></code>
<div class="block">indicates if we can join or leave or do some action to an group; suppose we asked to join group and then internet goes - we don'w want to request to leave/join
 another group until we get response from firebase and then we open this opportunity; true means can join/leave otherwise false</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.google.firebase.database.DatabaseReference</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#connectedRef">connectedRef</a></span></code>
<div class="block">reference to a special place in firebase that if we listen to it we can run code when app connected to firebase(includes internet connection + to firebase in general)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.firebase.database.ValueEventListener</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#connectionListener">connectionListener</a></span></code>
<div class="block">listener to connection to firebase changes event</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private android.widget.EditText</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#edtTitleSendMailRef">edtTitleSendMailRef</a></span></code>
<div class="block">reference to editText(title) in sendMail dialog, in order to pass it to fms later</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseMailSystem.html" title="class in com.example.mapnector.FirebaseCommunication">FirebaseMailSystem</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#fms">fms</a></span></code>
<div class="block">FirebaseMailSystem; part that manages stuff that has to do with mails</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.google.firebase.database.ValueEventListener</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#groupListener">groupListener</a></span></code>
<div class="block">listener to mine groups; update current group data in the ui</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.firebase.database.ValueEventListener</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#groupsPendingJoinListener">groupsPendingJoinListener</a></span></code>
<div class="block">listener to groupsPendingJoin; clear the array and add myself to groups specified there</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.google.firebase.database.ValueEventListener</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#groupsPendingKickListener">groupsPendingKickListener</a></span></code>
<div class="block">listener to groupsPendingKick; clear the array and remove myself from the groups specified there</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#isLastInGroup">isLastInGroup</a></span></code>
<div class="block">true if im the last in the group i will try to leave now; suppose im the last in group - i want to leave it and so delete all chat data so noeone can view it;
 suppose i press button to leave group but someone else joins immediatly after i press it - in that case i will not leave the group, mine request will be ignored</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#lastSearch">lastSearch</a></span></code>
<div class="block">last String typed in edtSearch</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#msg1">msg1</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#msg2">msg2</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#msg3">msg3</a></span></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private java.lang.String</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#msg4">msg4</a></span></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private android.app.ProgressDialog</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#pdSearchingConnection">pdSearchingConnection</a></span></code>
<div class="block">progressBar to not allow to work in app until we initialize FirebaseHelper.current(current user)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private android.app.ProgressDialog</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#pdWaitingNamechange">pdWaitingNamechange</a></span></code>
<div class="block">progressBar to not allow the user to change his name again before the old action didn't complete(simply blocks from app till we get onComplete from transaction)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.firebase.database.DatabaseReference</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#refMineGroups">refMineGroups</a></span></code>
<div class="block">reference to array of mine groups in firebase</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.google.firebase.database.DatabaseReference</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#refMineGroupsPendingJoin">refMineGroupsPendingJoin</a></span></code>
<div class="block">reference to array of groups that i should join to(request to join accepted) in firebase; most of the time empty(not existing in firebase)</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.firebase.database.DatabaseReference</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#refMineGroupsPendingKick">refMineGroupsPendingKick</a></span></code>
<div class="block">reference to array of groups that i should be kicked from in firebase; most of the time empty(not existing in firebase)</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private com.google.firebase.database.ValueEventListener</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#searchListener">searchListener</a></span></code>
<div class="block">listener to all groups with name specified in edtSearch; puts in left listView the new groups every time</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>private com.google.android.material.snackbar.Snackbar</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#snackbar">snackbar</a></span></code>
<div class="block">to show useful messages</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>private <a href="../../../../com/example/mapnector/UserInterface/UIHelper.html" title="class in com.example.mapnector.UserInterface">UIHelper</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#uiHelper">uiHelper</a></span></code>
<div class="block">reference to UIHelper</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#FirebaseGroupSystem-com.example.mapnector.LVAdapters.AdapterManager-com.example.mapnector.UserInterface.UIHelper-android.app.Activity-">FirebaseGroupSystem</a></span>(<a href="../../../../com/example/mapnector/LVAdapters/AdapterManager.html" title="class in com.example.mapnector.LVAdapters">AdapterManager</a>&nbsp;ADmanager,
                   <a href="../../../../com/example/mapnector/UserInterface/UIHelper.html" title="class in com.example.mapnector.UserInterface">UIHelper</a>&nbsp;uiHelper,
                   android.app.Activity&nbsp;activity)</code>
<div class="block">we initialize most of the variables and all the listeners, we call DB_InitCurrentUser</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_AddGroup-com.example.mapnector.DBStorage.Group-">DB_AddGroup</a></span>(<a href="../../../../com/example/mapnector/DBStorage/Group.html" title="class in com.example.mapnector.DBStorage">Group</a>&nbsp;g)</code>
<div class="block">add the group created by CreateGroupSystem to the list of groups in firebase</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_addSearchListener-java.lang.String-">DB_addSearchListener</a></span>(java.lang.String&nbsp;searchedVal)</code>
<div class="block">add listener to all groups that their name is the parameter; its made so we can view all groups that user types in edtSearch in left listView</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_changeName-java.lang.String-">DB_changeName</a></span>(java.lang.String&nbsp;name)</code>
<div class="block">we change the name in the Users table of the current user and in groupUsers table of each group in firebase; we don't touch chat system and mails
 so they will remain with the old name(but this will work because all the actions are done by user uid and not name, for example reply mail done via uid)</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_giveLeadership-com.example.mapnector.DBStorage.GroupUser-">DB_giveLeadership</a></span>(<a href="../../../../com/example/mapnector/DBStorage/GroupUser.html" title="class in com.example.mapnector.DBStorage">GroupUser</a>&nbsp;gu)</code>
<div class="block">make the groupUser leader of the group, and me a participant; send to that guy a mail that he got leadership</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>private void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_InitCurrentUser--">DB_InitCurrentUser</a></span>()</code>
<div class="block">we retrieve current user data from firebase, and initialize references(DatabaseReference); we add listeners to groups that i participate in; we load the mails i have gotten
 so far; we add listeners to mine groupsPendingKick, groupsPendingJoin to leave/join them in case they aren't null in firebase; We init fms.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_joinGroup--">DB_joinGroup</a></span>()</code>
<div class="block">join the group ADmanager.lastSelectedGroup - that means add myself to groupUsers list of that group, update the participant number, add the group to myGroups list;</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_joinGroup-java.lang.String-">DB_joinGroup</a></span>(java.lang.String&nbsp;groupKey)</code>
<div class="block">join the group with 'groupKey' key - that means add myself to groupUsers list of that group, update the participant number, add the group to myGroups list;
 That function(with parameter) used when we need to add group by key from groupsPendingJoin, more often we use the function without params</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_kickUser-com.example.mapnector.DBStorage.GroupUser-">DB_kickUser</a></span>(<a href="../../../../com/example/mapnector/DBStorage/GroupUser.html" title="class in com.example.mapnector.DBStorage">GroupUser</a>&nbsp;gu)</code>
<div class="block">kick a groupUser from the group; for security stuff i decided that none except of the user can't view or update 'myGroups' table in firebase; so we add  current group to
  groupsPendingKick of the groupUser and he will "kick himself" next time he restarts the app; data about user immediatly cleaned from group - but to clear data about the
   group from the user we will let the user do it by himself;</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_leaveGroup-boolean-">DB_leaveGroup</a></span>(boolean&nbsp;groupHaveLocationAccess)</code>
<div class="block">leave group that ADmanager.lastSelectedGroup; checks many "special cases" for example
 in case im leader and more than one participant is in the group i cant leave - must give someone leadership</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#DB_UpdateGroup-java.lang.String-java.lang.String-java.lang.String-">DB_UpdateGroup</a></span>(java.lang.String&nbsp;key,
              java.lang.String&nbsp;descrip,
              java.lang.String&nbsp;state)</code>
<div class="block">update group data in firebase; called after the btnCreateGroup of the dialog clicked; we change only the description and the state of the group</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#disableGroupListeners--">disableGroupListeners</a></span>()</code>
<div class="block">remove group listeners to groups im participating in</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#disablePendingGroupsListeners--">disablePendingGroupsListeners</a></span>()</code>
<div class="block">remove listeners for groupsPendingKick, groupsPendingJoin.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#disableSearchListener--">disableSearchListener</a></span>()</code>
<div class="block">remove listeners for all groups with name 'lastSearch'</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html#setEdtTitleSendMailRef-android.widget.EditText-">setEdtTitleSendMailRef</a></span>(android.widget.EditText&nbsp;ref)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.Object</h3>
<code>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="refMineGroups">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refMineGroups</h4>
<pre>private&nbsp;com.google.firebase.database.DatabaseReference refMineGroups</pre>
<div class="block">reference to array of mine groups in firebase</div>
</li>
</ul>
<a name="refMineGroupsPendingKick">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refMineGroupsPendingKick</h4>
<pre>private&nbsp;com.google.firebase.database.DatabaseReference refMineGroupsPendingKick</pre>
<div class="block">reference to array of groups that i should be kicked from in firebase; most of the time empty(not existing in firebase)</div>
</li>
</ul>
<a name="refMineGroupsPendingJoin">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>refMineGroupsPendingJoin</h4>
<pre>private&nbsp;com.google.firebase.database.DatabaseReference refMineGroupsPendingJoin</pre>
<div class="block">reference to array of groups that i should join to(request to join accepted) in firebase; most of the time empty(not existing in firebase)</div>
</li>
</ul>
<a name="connectedRef">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectedRef</h4>
<pre>private final&nbsp;com.google.firebase.database.DatabaseReference connectedRef</pre>
<div class="block">reference to a special place in firebase that if we listen to it we can run code when app connected to firebase(includes internet connection + to firebase in general)</div>
</li>
</ul>
<a name="ADmanager">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ADmanager</h4>
<pre>private final&nbsp;<a href="../../../../com/example/mapnector/LVAdapters/AdapterManager.html" title="class in com.example.mapnector.LVAdapters">AdapterManager</a> ADmanager</pre>
<div class="block">reference to the ADmanager created in LVHelper</div>
</li>
</ul>
<a name="searchListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>searchListener</h4>
<pre>private final&nbsp;com.google.firebase.database.ValueEventListener searchListener</pre>
<div class="block">listener to all groups with name specified in edtSearch; puts in left listView the new groups every time</div>
</li>
</ul>
<a name="groupListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>groupListener</h4>
<pre>private final&nbsp;com.google.firebase.database.ValueEventListener groupListener</pre>
<div class="block">listener to mine groups; update current group data in the ui</div>
</li>
</ul>
<a name="connectionListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>connectionListener</h4>
<pre>private final&nbsp;com.google.firebase.database.ValueEventListener connectionListener</pre>
<div class="block">listener to connection to firebase changes event</div>
</li>
</ul>
<a name="groupsPendingKickListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>groupsPendingKickListener</h4>
<pre>private final&nbsp;com.google.firebase.database.ValueEventListener groupsPendingKickListener</pre>
<div class="block">listener to groupsPendingKick; clear the array and remove myself from the groups specified there</div>
</li>
</ul>
<a name="groupsPendingJoinListener">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>groupsPendingJoinListener</h4>
<pre>private final&nbsp;com.google.firebase.database.ValueEventListener groupsPendingJoinListener</pre>
<div class="block">listener to groupsPendingJoin; clear the array and add myself to groups specified there</div>
</li>
</ul>
<a name="lastSearch">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lastSearch</h4>
<pre>private&nbsp;java.lang.String lastSearch</pre>
<div class="block">last String typed in edtSearch</div>
</li>
</ul>
<a name="uiHelper">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>uiHelper</h4>
<pre>private final&nbsp;<a href="../../../../com/example/mapnector/UserInterface/UIHelper.html" title="class in com.example.mapnector.UserInterface">UIHelper</a> uiHelper</pre>
<div class="block">reference to UIHelper</div>
</li>
</ul>
<a name="pdSearchingConnection">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pdSearchingConnection</h4>
<pre>private final&nbsp;android.app.ProgressDialog pdSearchingConnection</pre>
<div class="block">progressBar to not allow to work in app until we initialize FirebaseHelper.current(current user)</div>
</li>
</ul>
<a name="pdWaitingNamechange">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>pdWaitingNamechange</h4>
<pre>private final&nbsp;android.app.ProgressDialog pdWaitingNamechange</pre>
<div class="block">progressBar to not allow the user to change his name again before the old action didn't complete(simply blocks from app till we get onComplete from transaction)</div>
</li>
</ul>
<a name="snackbar">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snackbar</h4>
<pre>private final&nbsp;com.google.android.material.snackbar.Snackbar snackbar</pre>
<div class="block">to show useful messages</div>
</li>
</ul>
<a name="msg1">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>msg1</h4>
<pre>private final&nbsp;java.lang.String msg1</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.example.mapnector.FirebaseCommunication.FirebaseGroupSystem.msg1">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="msg2">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>msg2</h4>
<pre>private final&nbsp;java.lang.String msg2</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.example.mapnector.FirebaseCommunication.FirebaseGroupSystem.msg2">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="msg3">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>msg3</h4>
<pre>private final&nbsp;java.lang.String msg3</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.example.mapnector.FirebaseCommunication.FirebaseGroupSystem.msg3">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="msg4">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>msg4</h4>
<pre>private final&nbsp;java.lang.String msg4</pre>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.example.mapnector.FirebaseCommunication.FirebaseGroupSystem.msg4">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="canJoinLeaveGroup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canJoinLeaveGroup</h4>
<pre>public static&nbsp;boolean canJoinLeaveGroup</pre>
<div class="block">indicates if we can join or leave or do some action to an group; suppose we asked to join group and then internet goes - we don'w want to request to leave/join
 another group until we get response from firebase and then we open this opportunity; true means can join/leave otherwise false</div>
</li>
</ul>
<a name="isLastInGroup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLastInGroup</h4>
<pre>private&nbsp;boolean isLastInGroup</pre>
<div class="block">true if im the last in the group i will try to leave now; suppose im the last in group - i want to leave it and so delete all chat data so noeone can view it;
 suppose i press button to leave group but someone else joins immediatly after i press it - in that case i will not leave the group, mine request will be ignored</div>
</li>
</ul>
<a name="activity">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>activity</h4>
<pre>private final&nbsp;android.app.Activity activity</pre>
<div class="block">MapsActivtiy</div>
</li>
</ul>
<a name="fms">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fms</h4>
<pre>public&nbsp;<a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseMailSystem.html" title="class in com.example.mapnector.FirebaseCommunication">FirebaseMailSystem</a> fms</pre>
<div class="block">FirebaseMailSystem; part that manages stuff that has to do with mails</div>
</li>
</ul>
<a name="edtTitleSendMailRef">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>edtTitleSendMailRef</h4>
<pre>private&nbsp;android.widget.EditText edtTitleSendMailRef</pre>
<div class="block">reference to editText(title) in sendMail dialog, in order to pass it to fms later</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FirebaseGroupSystem-com.example.mapnector.LVAdapters.AdapterManager-com.example.mapnector.UserInterface.UIHelper-android.app.Activity-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FirebaseGroupSystem</h4>
<pre>public&nbsp;FirebaseGroupSystem(<a href="../../../../com/example/mapnector/LVAdapters/AdapterManager.html" title="class in com.example.mapnector.LVAdapters">AdapterManager</a>&nbsp;ADmanager,
                           <a href="../../../../com/example/mapnector/UserInterface/UIHelper.html" title="class in com.example.mapnector.UserInterface">UIHelper</a>&nbsp;uiHelper,
                           android.app.Activity&nbsp;activity)</pre>
<div class="block">we initialize most of the variables and all the listeners, we call DB_InitCurrentUser</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>ADmanager</code> - ref to ADmanager</dd>
<dd><code>uiHelper</code> - ref to UIHelper</dd>
<dd><code>activity</code> - ref to MapsActivity</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="DB_InitCurrentUser--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_InitCurrentUser</h4>
<pre>private&nbsp;void&nbsp;DB_InitCurrentUser()</pre>
<div class="block">we retrieve current user data from firebase, and initialize references(DatabaseReference); we add listeners to groups that i participate in; we load the mails i have gotten
 so far; we add listeners to mine groupsPendingKick, groupsPendingJoin to leave/join them in case they aren't null in firebase; We init fms.</div>
</li>
</ul>
<a name="setEdtTitleSendMailRef-android.widget.EditText-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setEdtTitleSendMailRef</h4>
<pre>public&nbsp;void&nbsp;setEdtTitleSendMailRef(android.widget.EditText&nbsp;ref)</pre>
</li>
</ul>
<a name="DB_kickUser-com.example.mapnector.DBStorage.GroupUser-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_kickUser</h4>
<pre>public&nbsp;void&nbsp;DB_kickUser(<a href="../../../../com/example/mapnector/DBStorage/GroupUser.html" title="class in com.example.mapnector.DBStorage">GroupUser</a>&nbsp;gu)</pre>
<div class="block">kick a groupUser from the group; for security stuff i decided that none except of the user can't view or update 'myGroups' table in firebase; so we add  current group to
  groupsPendingKick of the groupUser and he will "kick himself" next time he restarts the app; data about user immediatly cleaned from group - but to clear data about the
   group from the user we will let the user do it by himself;</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gu</code> - the groupUser to kick</dd>
</dl>
</li>
</ul>
<a name="DB_giveLeadership-com.example.mapnector.DBStorage.GroupUser-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_giveLeadership</h4>
<pre>public&nbsp;void&nbsp;DB_giveLeadership(<a href="../../../../com/example/mapnector/DBStorage/GroupUser.html" title="class in com.example.mapnector.DBStorage">GroupUser</a>&nbsp;gu)</pre>
<div class="block">make the groupUser leader of the group, and me a participant; send to that guy a mail that he got leadership</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>gu</code> - the groupUser to give leadership to</dd>
</dl>
</li>
</ul>
<a name="DB_AddGroup-com.example.mapnector.DBStorage.Group-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_AddGroup</h4>
<pre>public&nbsp;void&nbsp;DB_AddGroup(<a href="../../../../com/example/mapnector/DBStorage/Group.html" title="class in com.example.mapnector.DBStorage">Group</a>&nbsp;g)</pre>
<div class="block">add the group created by CreateGroupSystem to the list of groups in firebase</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>g</code> - the group just created and that have to be inserted in firebase</dd>
</dl>
</li>
</ul>
<a name="DB_joinGroup-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_joinGroup</h4>
<pre>public&nbsp;void&nbsp;DB_joinGroup(java.lang.String&nbsp;groupKey)</pre>
<div class="block">join the group with 'groupKey' key - that means add myself to groupUsers list of that group, update the participant number, add the group to myGroups list;
 That function(with parameter) used when we need to add group by key from groupsPendingJoin, more often we use the function without params</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>groupKey</code> - the key of the groups to be added</dd>
</dl>
</li>
</ul>
<a name="DB_joinGroup--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_joinGroup</h4>
<pre>public&nbsp;void&nbsp;DB_joinGroup()</pre>
<div class="block">join the group ADmanager.lastSelectedGroup - that means add myself to groupUsers list of that group, update the participant number, add the group to myGroups list;</div>
</li>
</ul>
<a name="DB_leaveGroup-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_leaveGroup</h4>
<pre>public&nbsp;void&nbsp;DB_leaveGroup(boolean&nbsp;groupHaveLocationAccess)</pre>
<div class="block">leave group that ADmanager.lastSelectedGroup; checks many "special cases" for example
 in case im leader and more than one participant is in the group i cant leave - must give someone leadership</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>groupHaveLocationAccess</code> - whether allowAccessLoc of the group in firebase set to true or false, in order to know if to enable or not checkbox if leave canceled</dd>
</dl>
</li>
</ul>
<a name="DB_addSearchListener-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_addSearchListener</h4>
<pre>public&nbsp;void&nbsp;DB_addSearchListener(java.lang.String&nbsp;searchedVal)</pre>
<div class="block">add listener to all groups that their name is the parameter; its made so we can view all groups that user types in edtSearch in left listView</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>searchedVal</code> - the name of the groups to listen to</dd>
</dl>
</li>
</ul>
<a name="disableSearchListener--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableSearchListener</h4>
<pre>public&nbsp;void&nbsp;disableSearchListener()</pre>
<div class="block">remove listeners for all groups with name 'lastSearch'</div>
</li>
</ul>
<a name="disablePendingGroupsListeners--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disablePendingGroupsListeners</h4>
<pre>public&nbsp;void&nbsp;disablePendingGroupsListeners()</pre>
<div class="block">remove listeners for groupsPendingKick, groupsPendingJoin. in case screen rotate we can accidently run sam code twice so we clear previous listeners</div>
</li>
</ul>
<a name="disableGroupListeners--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableGroupListeners</h4>
<pre>public&nbsp;void&nbsp;disableGroupListeners()</pre>
<div class="block">remove group listeners to groups im participating in</div>
</li>
</ul>
<a name="DB_changeName-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DB_changeName</h4>
<pre>public&nbsp;void&nbsp;DB_changeName(java.lang.String&nbsp;name)</pre>
<div class="block">we change the name in the Users table of the current user and in groupUsers table of each group in firebase; we don't touch chat system and mails
 so they will remain with the old name(but this will work because all the actions are done by user uid and not name, for example reply mail done via uid)</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>name</code> - the new name of the user</dd>
</dl>
</li>
</ul>
<a name="DB_UpdateGroup-java.lang.String-java.lang.String-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DB_UpdateGroup</h4>
<pre>public&nbsp;void&nbsp;DB_UpdateGroup(java.lang.String&nbsp;key,
                           java.lang.String&nbsp;descrip,
                           java.lang.String&nbsp;state)</pre>
<div class="block">update group data in firebase; called after the btnCreateGroup of the dialog clicked; we change only the description and the state of the group</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>key</code> - the key of the group to chagne</dd>
<dd><code>descrip</code> - the new description of the group</dd>
<dd><code>state</code> - the new state o the group(closed, opened or invitation)</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-files/index-1.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Class</li>
<li><a href="../../../../com/example/mapnector/FirebaseCommunication/FirebaseHelper.html" title="class in com.example.mapnector.FirebaseCommunication"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/example/mapnector/FirebaseCommunication/FirebaseGroupSystem.html" target="_top">Frames</a></li>
<li><a href="FirebaseGroupSystem.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
</body>
</html>
